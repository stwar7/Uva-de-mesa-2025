[
  {
    "objectID": "scripts/pardeamiento_uva.html",
    "href": "scripts/pardeamiento_uva.html",
    "title": "Sensibilidad al pardeamiento del raquis de uva de mesa",
    "section": "",
    "text": "# Import librerias necesarias\nimport pandas as pd\nimport openpyxl\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport matplotlib.colors as mcolors\nfrom sklearn.metrics import r2_score, mean_squared_error\nfrom sklearn.linear_model import LinearRegression"
  },
  {
    "objectID": "scripts/pardeamiento_uva.html#resultados",
    "href": "scripts/pardeamiento_uva.html#resultados",
    "title": "Sensibilidad al pardeamiento del raquis de uva de mesa",
    "section": "Resultados",
    "text": "Resultados\n\n1. Caracterizacion inicial a cosecha\n\nprint('Tabla 1: Caracterizacion inicial en cosecha, cv. Allison y S. Celebretion.(media ± DE)')\n\nCosecha = pd.read_excel(r'../datos/caracterizacion inicial.xlsx')\ndf = pd.DataFrame(Cosecha)\n\ndf.columns = df.columns.str.strip() # Normalizar nombres de columnas \n\n# Filtro de datos de acuerdo evaluacion 0h,3h,18h \ndf_filtrado = df[df[\"Evaluacion\"].isin([\"E00\", \"E03\", \"E18\"])]\n\n# Tabla resumen de caracterizacion inicial \ndf_resumen =(df_filtrado.groupby('Variedad')\n             [['TSS','Acidez_titulable', 'Peso', 'Calibre_Ecuatorial', 'Firmeza']] \n.agg(['mean', 'std','count']) \n.round(2) \n.reset_index() \n) \n# creamos un tabal media + DE\ntabla_resumen = pd.DataFrame()\ntabla_resumen[\"Variedad\"] = df_resumen[\"Variedad\"]\n\nfor var in [\"TSS\", \"Acidez_titulable\", \"Peso\", \"Calibre_Ecuatorial\", \"Firmeza\"]:\n    tabla_resumen[var] = df_resumen.apply(\n        lambda x: f\"{x[(var, 'mean')]:.2f} ± {x[(var, 'std')]:.2f}\", axis=1\n    )\n\n# Renombrar encabezados\ntabla_resumen = tabla_resumen.rename(columns={\n    \"TSS\": \"TSS (°Brix)\",\n    \"Acidez_titulable\": \"Acidez Titulable (g/L)\",\n    \"Peso\": \"Peso (g)\",\n    \"Calibre_Ecuatorial\": \"Calibre (mm)\",\n    \"Firmeza\": \"Firmeza (gf mm-1)\"\n})\n\nprint(tabla_resumen)\n\nTabla 1: Caracterizacion inicial en cosecha, cv. Allison y S. Celebretion.(media ± DE)\n  Variedad   TSS (°Brix) Acidez Titulable (g/L)      Peso (g)  Calibre (mm)  \\\n0       AL  19.04 ± 1.04            0.64 ± 0.07  10.18 ± 1.82  22.57 ± 1.58   \n1       SC  18.04 ± 0.80            0.78 ± 0.09   9.03 ± 1.61  23.60 ± 1.54   \n\n  Firmeza (gf mm-1)  \n0    322.48 ± 64.59  \n1    242.69 ± 18.44  \n\n\n\n\n2. Relación de acuedo hue inicial, Contenido Relativo del agua\n\n# 1. Cargamos archivos \n# =====================================================================================\ndatos_correlacion = pd.read_csv(r'../datos/Pardeamiento uva de mesa.csv', sep=';')\n\ndf = pd.DataFrame(datos_correlacion)\ndf.columns = df.columns.str.strip() # Normalizar nombres de columnas \n\n#Visualizar las primeras columnas de  df. \n#print(df.columns)\n#df.info() \n#df.head()\n\n# 2. Crear un identificador único por racimo\ndf['ID'] = (df['Variedad'].astype(str) + '_' +\n            df['Productor'].astype(str) + '_' +\n            df['Tratamientos'].astype(str) + '_' +\n            df['Repeticion'].astype(str) + '_' +\n            df['N_Racimo'].astype(str))\n\n# 3. Pivotar para tener columnas separadas\ntabla_correlaciones = (\n    df.pivot_table(\n        index=['Variedad', 'ID'],\n        columns='Tiempo',\n        values='Hue'\n    )\n    .reset_index()\n    .round(2)  # redondear a 2 decimales\n)\n\n#Visualizar tabla de correlaciones\n#tabla_correlaciones.head()\n#tabla_correlaciones.info()\n# Colormap personalizado con ayuda de Chatgpt\ncolors = [\n    (0.8, 0.2, 0.1),   # Rojo degradado (menos saturado, más natural)\n    (1.0, 0.5, 0.0),   # Naranja\n    (1.0, 1.0, 0.0),   # Amarillo\n    (0.7, 1.0, 0.3)    # Verde amarillento\n]\ncmap_rav = mcolors.LinearSegmentedColormap.from_list(\"rojo_amarillo_verde\", colors, N=256) \n\n\n# 4. Crear figura de correlaciones por variedad hus vs hue \nplt.figure(figsize=(9, 5))\nvariedades = tabla_correlaciones['Variedad'].unique()\n\n# 5. Colores distintos para las líneas\ncolores_linea = ['black', 'blue']\n\n# Correlaciones del T0 y T10\nsc = plt.scatter(tabla_correlaciones['T0'],\n                 tabla_correlaciones['T10'],\n                 c=tabla_correlaciones['T10'], \n                 cmap=cmap_rav\n)\n# Regresión lineal por variedad\nfor i, variedad in enumerate(variedades):\n    datos = tabla_correlaciones[tabla_correlaciones['Variedad'] == variedad]\n    X = datos[['T0']].values\n    y = datos['T10'].values\n    \n    #Regresion linel\n    modelo = LinearRegression()\n    modelo.fit(X, y)\n    y_pred = modelo.predict(X)\n\n    # Calcular R², pendiente, intercepto\n    r2 = r2_score(y, y_pred)\n    pendiente = modelo.coef_[0]\n    intercepto = modelo.intercept_\n\n    # Dibujar la línea de regresión variedad\n    plt.plot(X, y_pred,\n             color=colores_linea[i % len(colores_linea)],\n             lw=2, label=f'{variedad}: y={pendiente:.2f}x+{intercepto:.2f}, (R²={r2:.2f})')\n\n# Etiquetas y formato Grafico\nplt.xlabel('Hue inicial (°) en Cosecha')\nplt.ylabel('Hue final (°) - 10 d a 0° C')\nplt.title('Relacion Hue inicial vs Hue final por variedad', fontsize=13, weight='bold')\nplt.colorbar()\nplt.grid(True)\nplt.legend(frameon=True)\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n# 2  Correlacion de acuerdo CRA vs pardeamiento -----------------------------------------------------------------------\ndatos_CRA = pd.read_csv(r'../datos/Contenido relativo de agua.csv', sep=';')\n\n#datos_CRA.info()\n\n#Calculamos el promedio  CAR en T0\nCRA_promedio_T0 = (\n    datos_CRA\n    .groupby(['Productor', 'Variedad', 'Color', 'Tratamientos'])['CAR']\n    .mean()\n    .round(2)\n    .reset_index()\n)\n\n#Filtrar pardeamiento T10 ---\nPardo_t10 = df[df['Tiempo'] == 'T10']\n#print(Pardo_t10.columns)\n\n#Calculamso en promedio pardeamiento T10\n\nPardo_promedio_T10 = (\n    Pardo_t10\n    .groupby(['Productor', 'Variedad', 'Color', 'Tratamientos'])['Pardo']\n    .mean()\n    .round(2)\n    .reset_index()\n)\n#Unimos ambos promedio por columnas comunes \nCAR_VS_PAR = pd.merge(\n    CRA_promedio_T0,\n    Pardo_promedio_T10,\n    on=['Productor', 'Variedad', 'Color', 'Tratamientos']\n)\n\n\ncolors = [\n    (0.7, 1.0, 0.3),   # Verde amarillento\n    (1.0, 1.0, 0.0),   # Amarillo\n    (1.0, 0.5, 0.0),   # Naranja\n    (0.8, 0.2, 0.1)    # Pardo/rojo degradado\n]\ncmap_rav1 = mcolors.LinearSegmentedColormap.from_list(\"verde_a_pardo\", colors, N=256)\n\n# --- Crear gráfico de correlación CAR vs Pardo ---\nplt.figure(figsize=(10, 6))\nvariedades = CAR_VS_PAR['Variedad'].unique()\ncolores_linea = ['black', 'blue']\n\n# Dispersión global\nsc = plt.scatter(CAR_VS_PAR['CAR'], CAR_VS_PAR['Pardo'], c=CAR_VS_PAR['Pardo'], cmap= cmap_rav1)\n\n# Regresión lineal por variedad\nfor i, variedad in enumerate(variedades):\n    datos = CAR_VS_PAR[CAR_VS_PAR['Variedad'] == variedad]\n    X = datos[['CAR']].values\n    y = datos['Pardo'].values\n    \n    modelo = LinearRegression()\n    modelo.fit(X, y)\n    y_pred = modelo.predict(X)\n    \n    r2 = r2_score(y, y_pred)\n    pendiente = modelo.coef_[0]\n    intercepto = modelo.intercept_\n    \n    plt.plot(X, y_pred,\n             color=colores_linea[i % len(colores_linea)],\n             lw=2,\n             label=f'{variedad}: y={pendiente:.2f}x+{intercepto:.2f}, (R²={r2:.2f})')\n\n# --- Formato final ---\nplt.xlabel('Contenido Relativo de Agua (CRA) en cosecha')\nplt.ylabel('Intensidad del Pardeamiento del raquis (%)')\nplt.title('Relación CRA inicial vs Pardeamiento final por variedad', fontsize=13, weight='bold')\nplt.colorbar()\nplt.grid(alpha=0.4)\nplt.legend(frameon=True)\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n\n3. Almacenamiento comercial en postcosecha.\nRevisara si las varibles de acuerdo el color en cosecha influyen en el pardeamiento del raquis de uva de mesa de amabas variedades.\n\n\n# 1. Cargar datos\n# ===================================================\n\ndf = pd.read_csv(r'../datos/Almacenamiento comercial.csv', sep= ';')\ndf.columns = df.columns.str.strip()\n\n\n# 2. Opcional: ordenar niveles de Tiempo si quieres\norden_tiempo = ['T40', 'T43']\n\nif set(orden_tiempo).issuperset(df['Tiempo'].unique()):\n    df['Tiempo'] = pd.Categorical(df['Tiempo'], categories=orden_tiempo, ordered=True)\n\n\n# 3. Crear boxplot facetado por Variedad\ncolores = {'A': \"#f2f464\", \n           'V': \"#29ac29\"}  \n\ng = sns.catplot(\n    data=df,\n    kind='box',\n    x='Tiempo',\n    y='Pardo',\n    hue='Color',\n    col='Variedad',\n    palette=colores,\n    height=5,\n    aspect=1,\n    fliersize=4,        # tamaño de outliers\n    linewidth=1.2\n)\n\n# Ajusta leyenda fuera del grafico \ng._legend.set_bbox_to_anchor((1.12, 0.5)) \n\n# ===================================================\n# 4. Ajustes finales — Escala Y fija\n\nfor ax in g.axes.flatten():\n    ax.set_ylim(0, 100)  # ← AQUÍ SE FIJA LA ESCALA DE 0 A 100\n    ax.set_ylabel(\"% Área parda del raquis\", fontsize=11)\n    ax.set_xlabel(\"Tiempo de almacenamiento (días)\", fontsize=11)\n    ax.tick_params(axis='both', labelsize=10)\n# ===================================================\n# 5. Títulos y estética final\n\ng.fig.suptitle(\n    \" Pardeamiento del raquis durante el almacenamiento comercial poscosecha\",\n    y=1.05,\n    fontsize=14,\n    fontweight='bold'\n)\n\nfor ax in g.axes.flatten():\n    ax.set_ylabel(\"% Área parda del raquis\", fontsize=11)\n    ax.set_xlabel(\"Tiempo de almacenamiento (días)\", fontsize=11)\n    ax.tick_params(axis='both', labelsize=10)\n\nplt.tight_layout()\nplt.show()"
  },
  {
    "objectID": "scripts/index.html",
    "href": "scripts/index.html",
    "title": "DETERMINACIÓN DE LA SENSIBILIDAD DEL RAQUIS A LA DESHIDRATACIÓN EN POSCOSECHA BASADA EN PARÁMETROS DE COSECHA",
    "section": "",
    "text": "El proceso de pardeamiento es un fenómeno natural que ocurre en frutas y verduras, que se ha convertido en un desafío en el sector de la industria alimentaria.La aparición de reacciones de pardeamiento de los alimentos generalmente afecta la apariencia del color de los alimentos y reduce notablemente la aceptación de los productos por parte del cliente.Actualmente, la determinación del momento de cosecha en uva de mesa se basa principalmente en parámetros de madurez como el contenido de sólidos solubles (°Brix) y la acidez titulable, sin considerar el estado fisiológico del raquis en el proceso de recolección. Sin embargo, se ha evidenciado que el cambio de color del raquis ocurre de manera paralela a la maduración de las bayas y se asocia directamente con la disminución del contenido relativo de agua (CAR) del tejido (Fang et al., 2015).\n\n# Import librerias necesarias\nimport pandas as pd\nimport openpyxl\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport matplotlib.colors as mcolors\nfrom sklearn.metrics import r2_score, mean_squared_error\nfrom sklearn.linear_model import LinearRegression"
  },
  {
    "objectID": "scripts/index.html#introduccion",
    "href": "scripts/index.html#introduccion",
    "title": "DETERMINACIÓN DE LA SENSIBILIDAD DEL RAQUIS A LA DESHIDRATACIÓN EN POSCOSECHA BASADA EN PARÁMETROS DE COSECHA",
    "section": "",
    "text": "El proceso de pardeamiento es un fenómeno natural que ocurre en frutas y verduras, que se ha convertido en un desafío en el sector de la industria alimentaria.La aparición de reacciones de pardeamiento de los alimentos generalmente afecta la apariencia del color de los alimentos y reduce notablemente la aceptación de los productos por parte del cliente.Actualmente, la determinación del momento de cosecha en uva de mesa se basa principalmente en parámetros de madurez como el contenido de sólidos solubles (°Brix) y la acidez titulable, sin considerar el estado fisiológico del raquis en el proceso de recolección. Sin embargo, se ha evidenciado que el cambio de color del raquis ocurre de manera paralela a la maduración de las bayas y se asocia directamente con la disminución del contenido relativo de agua (CAR) del tejido (Fang et al., 2015).\n\n# Import librerias necesarias\nimport pandas as pd\nimport openpyxl\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport matplotlib.colors as mcolors\nfrom sklearn.metrics import r2_score, mean_squared_error\nfrom sklearn.linear_model import LinearRegression"
  },
  {
    "objectID": "scripts/index.html#resultados",
    "href": "scripts/index.html#resultados",
    "title": "DETERMINACIÓN DE LA SENSIBILIDAD DEL RAQUIS A LA DESHIDRATACIÓN EN POSCOSECHA BASADA EN PARÁMETROS DE COSECHA",
    "section": "Resultados",
    "text": "Resultados\n\n1. Caracterizacion inicial a cosecha\nLa cosecha se realizó en el estado de madurez determinado por cada productor, siguiendo los criterios comerciales establecidos para uva de mesa (Tabla 1). Los sólidos solubles totales (STT) fluctuaron entre 17 % - 19%, mientras que la acidez titulable se mantuvo en rangos (0.51 % - 0.78%). Es importante destacar que la firmeza de la baya presento variabilidad entre cultivares, destacando Sweet Globe con la mayor firmeza (652.46 g mm-1).\n\nprint('Tabla 1: Caracterizacion inicial en cosecha, cv. Allison y S. Celebretion.(media ± DE)')\n\nCosecha = pd.read_excel(r'../datos/caracterizacion inicial.xlsx')\ndf = pd.DataFrame(Cosecha)\n\ndf.columns = df.columns.str.strip() # Normalizar nombres de columnas \n\n# Filtro de datos de acuerdo evaluacion 0h,3h,18h \ndf_filtrado = df[df[\"Evaluacion\"].isin([\"E00\", \"E03\", \"E18\"])]\n\n# Tabla resumen de caracterizacion inicial \ndf_resumen =(df_filtrado.groupby('Variedad')\n             [['TSS','Acidez_titulable', 'Peso', 'Calibre_Ecuatorial', 'Firmeza']] \n.agg(['mean', 'std','count']) \n.round(2) \n.reset_index() \n) \n# creamos un tabal media + DE\ntabla_resumen = pd.DataFrame()\ntabla_resumen[\"Variedad\"] = df_resumen[\"Variedad\"]\n\nfor var in [\"TSS\", \"Acidez_titulable\", \"Peso\", \"Calibre_Ecuatorial\", \"Firmeza\"]:\n    tabla_resumen[var] = df_resumen.apply(\n        lambda x: f\"{x[(var, 'mean')]:.2f} ± {x[(var, 'std')]:.2f}\", axis=1\n    )\n\n# Renombrar encabezados\ntabla_resumen = tabla_resumen.rename(columns={\n    \"TSS\": \"TSS (°Brix)\",\n    \"Acidez_titulable\": \"Acidez Titulable (g/L)\",\n    \"Peso\": \"Peso (g)\",\n    \"Calibre_Ecuatorial\": \"Calibre (mm)\",\n    \"Firmeza\": \"Firmeza (gf mm-1)\"\n})\n\nprint(tabla_resumen)\n\nTabla 1: Caracterizacion inicial en cosecha, cv. Allison y S. Celebretion.(media ± DE)\n  Variedad   TSS (°Brix) Acidez Titulable (g/L)      Peso (g)  Calibre (mm)  \\\n0       AL  19.04 ± 1.04            0.64 ± 0.07  10.18 ± 1.82  22.57 ± 1.58   \n1       SC  18.04 ± 0.80            0.78 ± 0.09   9.03 ± 1.61  23.60 ± 1.54   \n\n  Firmeza (gf mm-1)  \n0    322.48 ± 64.59  \n1    242.69 ± 18.44  \n\n\n\n\n2. Relación de acuedo hue inicial, Contenido Relativo del agua\nLos valores iniciales de Hue (°) del raquis mostraron una fuerte relaciona negativa con la intensidad del pardeamiento después de 10 días a 0°C . Indicando que valores de Hue (°) más bajos (desplazamiento hacia el amarillo) están asociado con un mayor oscurecimiento durante el almacenamiento en poscosecha.\nEl Contenido Relativo de Agua (CRA), mostró una relación inversa consistente con el pardeamiento del raquis en los 2 cultivares evaluados. Durante el almacenamiento 10 días a 0 °C la relación fue especialmente fuerte en Allison (R² = 0.85), Sweet Celebration (R² = 0.78)\n\n# 1. Cargamos archivos \n# =====================================================================================\ndatos_correlacion = pd.read_csv(r'../datos/Pardeamiento uva de mesa.csv', sep=';')\n\ndf = pd.DataFrame(datos_correlacion)\ndf.columns = df.columns.str.strip() # Normalizar nombres de columnas \n\n#Visualizar las primeras columnas de  df. \n#print(df.columns)\n#df.info() \n#df.head()\n\n# 2. Crear un identificador único por racimo\ndf['ID'] = (df['Variedad'].astype(str) + '_' +\n            df['Productor'].astype(str) + '_' +\n            df['Tratamientos'].astype(str) + '_' +\n            df['Repeticion'].astype(str) + '_' +\n            df['N_Racimo'].astype(str))\n\n# 3. Pivotar para tener columnas separadas\ntabla_correlaciones = (\n    df.pivot_table(\n        index=['Variedad', 'ID'],\n        columns='Tiempo',\n        values='Hue'\n    )\n    .reset_index()\n    .round(2)  # redondear a 2 decimales\n)\n\n#Visualizar tabla de correlaciones\n#tabla_correlaciones.head()\n#tabla_correlaciones.info()\n# Colormap personalizado con ayuda de Chatgpt\ncolors = [\n    (0.8, 0.2, 0.1),   # Rojo degradado (menos saturado, más natural)\n    (1.0, 0.5, 0.0),   # Naranja\n    (1.0, 1.0, 0.0),   # Amarillo\n    (0.7, 1.0, 0.3)    # Verde amarillento\n]\ncmap_rav = mcolors.LinearSegmentedColormap.from_list(\"rojo_amarillo_verde\", colors, N=256) \n\n\n# 4. Crear figura de correlaciones por variedad hus vs hue \nplt.figure(figsize=(9, 5))\nvariedades = tabla_correlaciones['Variedad'].unique()\n\n# 5. Colores distintos para las líneas\ncolores_linea = ['black', 'blue']\n\n# Correlaciones del T0 y T10\nsc = plt.scatter(tabla_correlaciones['T0'],\n                 tabla_correlaciones['T10'],\n                 c=tabla_correlaciones['T10'], \n                 cmap=cmap_rav\n)\n# Regresión lineal por variedad\nfor i, variedad in enumerate(variedades):\n    datos = tabla_correlaciones[tabla_correlaciones['Variedad'] == variedad]\n    X = datos[['T0']].values\n    y = datos['T10'].values\n    \n    #Regresion linel\n    modelo = LinearRegression()\n    modelo.fit(X, y)\n    y_pred = modelo.predict(X)\n\n    # Calcular R², pendiente, intercepto\n    r2 = r2_score(y, y_pred)\n    pendiente = modelo.coef_[0]\n    intercepto = modelo.intercept_\n\n    # Dibujar la línea de regresión variedad\n    plt.plot(X, y_pred,\n             color=colores_linea[i % len(colores_linea)],\n             lw=2, label=f'{variedad}: y={pendiente:.2f}x+{intercepto:.2f}, (R²={r2:.2f})')\n\n# Etiquetas y formato Grafico\nplt.xlabel('Hue inicial (°) en Cosecha')\nplt.ylabel('Hue final (°) - 10 d a 0° C')\nplt.title('Relacion Hue inicial vs Hue final por variedad', fontsize=13, weight='bold')\nplt.colorbar()\nplt.grid(True)\nplt.legend(frameon=True)\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n# 2  Correlacion de acuerdo CRA vs pardeamiento -----------------------------------------------------------------------\ndatos_CRA = pd.read_csv(r'../datos/Contenido relativo de agua.csv', sep=';')\n\n#datos_CRA.info()\n\n#Calculamos el promedio  CAR en T0\nCRA_promedio_T0 = (\n    datos_CRA\n    .groupby(['Productor', 'Variedad', 'Color', 'Tratamientos'])['CAR']\n    .mean()\n    .round(2)\n    .reset_index()\n)\n\n#Filtrar pardeamiento T10 ---\nPardo_t10 = df[df['Tiempo'] == 'T10']\n#print(Pardo_t10.columns)\n\n#Calculamso en promedio pardeamiento T10\n\nPardo_promedio_T10 = (\n    Pardo_t10\n    .groupby(['Productor', 'Variedad', 'Color', 'Tratamientos'])['Pardo']\n    .mean()\n    .round(2)\n    .reset_index()\n)\n#Unimos ambos promedio por columnas comunes \nCAR_VS_PAR = pd.merge(\n    CRA_promedio_T0,\n    Pardo_promedio_T10,\n    on=['Productor', 'Variedad', 'Color', 'Tratamientos']\n)\n\n\ncolors = [\n    (0.7, 1.0, 0.3),   # Verde amarillento\n    (1.0, 1.0, 0.0),   # Amarillo\n    (1.0, 0.5, 0.0),   # Naranja\n    (0.8, 0.2, 0.1)    # Pardo/rojo degradado\n]\ncmap_rav1 = mcolors.LinearSegmentedColormap.from_list(\"verde_a_pardo\", colors, N=256)\n\n# --- Crear gráfico de correlación CAR vs Pardo ---\nplt.figure(figsize=(10, 6))\nvariedades = CAR_VS_PAR['Variedad'].unique()\ncolores_linea = ['black', 'blue']\n\n# Dispersión global\nsc = plt.scatter(CAR_VS_PAR['CAR'], CAR_VS_PAR['Pardo'], c=CAR_VS_PAR['Pardo'], cmap= cmap_rav1)\n\n# Regresión lineal por variedad\nfor i, variedad in enumerate(variedades):\n    datos = CAR_VS_PAR[CAR_VS_PAR['Variedad'] == variedad]\n    X = datos[['CAR']].values\n    y = datos['Pardo'].values\n    \n    modelo = LinearRegression()\n    modelo.fit(X, y)\n    y_pred = modelo.predict(X)\n    \n    r2 = r2_score(y, y_pred)\n    pendiente = modelo.coef_[0]\n    intercepto = modelo.intercept_\n    \n    plt.plot(X, y_pred,\n             color=colores_linea[i % len(colores_linea)],\n             lw=2,\n             label=f'{variedad}: y={pendiente:.2f}x+{intercepto:.2f}, (R²={r2:.2f})')\n\n# --- Formato final ---\nplt.xlabel('Contenido Relativo de Agua (CRA) en cosecha')\nplt.ylabel('Intensidad del Pardeamiento del raquis (%)')\nplt.title('Relación CRA inicial vs Pardeamiento final por variedad', fontsize=13, weight='bold')\nplt.colorbar()\nplt.grid(alpha=0.4)\nplt.legend(frameon=True)\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n\n3. Almacenamiento comercial en postcosecha.\nEl pardeamiento del raquis aumentó consistentemente con el tiempo de almacenamiento comercial en ambas variedades evaluadas. ‘Allison’ mostró niveles iniciales más altos y una progresión más marcada del oscurecimiento respecto de ‘Sweet Celebration’. Asimismo, los racimos clasificados con raquis amarillo (A) tendieron a presentar mayor área parda que aquellos con raquis verde (V), lo que confirma la relevancia del color inicial como indicador fisiológico de la sensibilidad al pardeamiento durante la poscosecha.\n\n# 1. Cargar datos\n# ===================================================\n\ndf = pd.read_csv(r'../datos/Almacenamiento comercial.csv', sep= ';')\ndf.columns = df.columns.str.strip()\n\n\n# 2. Opcional: ordenar niveles de Tiempo si quieres\norden_tiempo = ['T40', 'T43']\n\nif set(orden_tiempo).issuperset(df['Tiempo'].unique()):\n    df['Tiempo'] = pd.Categorical(df['Tiempo'], categories=orden_tiempo, ordered=True)\n\n\n# 3. Crear boxplot facetado por Variedad\ncolores = {'A': \"#f2f464\", \n           'V': \"#29ac29\"}  \n\ng = sns.catplot(\n    data=df,\n    kind='box',\n    x='Tiempo',\n    y='Pardo',\n    hue='Color',\n    col='Variedad',\n    palette=colores,\n    height=5,\n    aspect=1,\n    fliersize=4,        # tamaño de outliers\n    linewidth=1.2\n)\n\n# Ajusta leyenda fuera del grafico \ng._legend.set_bbox_to_anchor((1.12, 0.5)) \n\n# ===================================================\n# 4. Ajustes finales — Escala Y fija\n\nfor ax in g.axes.flatten():\n    ax.set_ylim(0, 100)  # ← AQUÍ SE FIJA LA ESCALA DE 0 A 100\n    ax.set_ylabel(\"% Área parda del raquis\", fontsize=11)\n    ax.set_xlabel(\"Tiempo de almacenamiento (días)\", fontsize=11)\n    ax.tick_params(axis='both', labelsize=10)\n# ===================================================\n# 5. Títulos y estética final\n\ng.fig.suptitle(\n    \" Pardeamiento del raquis durante el almacenamiento comercial poscosecha\",\n    y=1.05,\n    fontsize=14,\n    fontweight='bold'\n)\n\nfor ax in g.axes.flatten():\n    ax.set_ylabel(\"% Área parda del raquis\", fontsize=11)\n    ax.set_xlabel(\"Tiempo de almacenamiento (días)\", fontsize=11)\n    ax.tick_params(axis='both', labelsize=10)\n\nplt.tight_layout()\nplt.show()"
  }
]